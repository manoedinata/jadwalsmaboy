<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Jadwal Pelajaran</title>

    <!-- Bootstrap -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css"
    />

    <!-- Custom CSS -->
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body class="font-averta">
    <nav
      class="navbar navbar-dark bg-blue-dark navbar-expand-lg bg-body-tertiary"
    >
      <div class="container">
        <a class="navbar-brand" href="./index.html">Jadwal Pelajaran</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavAltMarkup"
          aria-controls="navbarNavAltMarkup"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
          <div class="navbar-nav ms-auto">
            <a class="nav-link" aria-current="page" href="./index.html"
              >Pelajaran</a
            >
            <a class="nav-link" aria-current="page" href="./guru.html">Guru</a>
            <a class="nav-link" aria-current="page" href="./lokasi_guru.html"
              >Lokasi Guru</a
            >
            <a class="nav-link active" aria-current="page" href="./doa.html"
              >Doa</a
            >
            <a class="nav-link" href="./ujian.html">Ujian PAS 2024</a>
            <a class="nav-link" aria-current="page" href="./donasi.html"
              >Donasi</a
            >
          </div>
        </div>
      </div>
    </nav>

    <div id="hero" class="bg-blue-dark text-white">
      <div class="px-4 py-5 text-center">
        <h1 class="display-4 fw-bold">/doa/</h1>
        <div class="col-lg-6 mx-auto">
          <p class="lead mb-4">
            Doa sebelum dan sesudah pelajaran, Dibiasakan untuk dibaca setiap
            memulai dan mengakhiri pelajaran.
          </p>
        </div>
      </div>

      <svg
        id="wave"
        style="transform: rotate(0deg); transition: 0.3s"
        viewBox="0 0 1440 95"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
      >
        <defs>
          <linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0">
            <stop stop-color="rgba(255, 255, 255, 1)" offset="0%"></stop>
            <stop stop-color="rgba(255, 255, 255, 1)" offset="100%"></stop>
          </linearGradient>
        </defs>
        <path
          style="transform: translate(0, 0px); opacity: 1"
          fill="url(#sw-gradient-0)"
          d="M0,0L80,10C160,20,320,40,480,40C640,40,800,20,960,18.3C1120,17,1280,33,1440,40C1600,47,1760,43,1920,50C2080,57,2240,73,2400,80C2560,87,2720,83,2880,70C3040,57,3200,33,3360,26.7C3520,20,3680,30,3840,33.3C4000,37,4160,33,4320,38.3C4480,43,4640,57,4800,51.7C4960,47,5120,23,5280,13.3C5440,3,5600,7,5760,15C5920,23,6080,37,6240,45C6400,53,6560,57,6720,51.7C6880,47,7040,33,7200,35C7360,37,7520,53,7680,65C7840,77,8000,83,8160,71.7C8320,60,8480,30,8640,26.7C8800,23,8960,47,9120,60C9280,73,9440,77,9600,65C9760,53,9920,27,10080,25C10240,23,10400,47,10560,61.7C10720,77,10880,83,11040,81.7C11200,80,11360,70,11440,65L11520,60L11520,100L11440,100C11360,100,11200,100,11040,100C10880,100,10720,100,10560,100C10400,100,10240,100,10080,100C9920,100,9760,100,9600,100C9440,100,9280,100,9120,100C8960,100,8800,100,8640,100C8480,100,8320,100,8160,100C8000,100,7840,100,7680,100C7520,100,7360,100,7200,100C7040,100,6880,100,6720,100C6560,100,6400,100,6240,100C6080,100,5920,100,5760,100C5600,100,5440,100,5280,100C5120,100,4960,100,4800,100C4640,100,4480,100,4320,100C4160,100,4000,100,3840,100C3680,100,3520,100,3360,100C3200,100,3040,100,2880,100C2720,100,2560,100,2400,100C2240,100,2080,100,1920,100C1760,100,1600,100,1440,100C1280,100,1120,100,960,100C800,100,640,100,480,100C320,100,160,100,80,100L0,100Z"
        ></path>
      </svg>
    </div>

    <div id="doa" class="mb-4">
      <div class="container">
        <div class="row">
          <!-- Sebelum pelajaran -->
          <div class="col-12 col-lg-6 mb-4">
            <div class="card">
              <div class="card-header">
                <strong>Sebelum Pelajaran</strong>
              </div>
              <div class="card-body text-end">
                <div id="doa-1">
                  <h5 class="card-title amiri-bold fs-3">
                    اَللَّهُمَّ صَلِّ عَلٰى سَيِّدِنَا مُحَمَّدٍ وَعَلٰى اٰلِهٖ
                    وَصَحْبِهٖ اَجْمَعِيْنَ
                  </h5>
                  <p class="card-text">
                    <i
                      >Allahumma Sholli ‘ala Sayyidina Muhammad wa’ala Alihi
                      Washohbihi Ajma’in
                    </i>
                    <br />
                    Artinya: ” Ya Allah berikanlah rahmat atas junjungan kita
                    Nabi Muhammad dan atas keluarga beliau serta para sahabat
                    beliau seluruhnya”.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-2">
                  <h5 class="card-title amiri-bold fs-3">
                    رَبِّ اشْرَحْ لِيْ صَدْرِيْۙ ۝٢٥ وَيَسِّرْ لِيْٓ اَمْرِيْۙ
                    ۝٢٦ وَاحْلُلْ عُقْدَةً مِّنْ لِّسَانِيْۙ ۝٢٧ يَفْقَهُوْا
                    قَوْلِيْۖ ۝٢٨
                  </h5>
                  <p class="card-text">
                    <i
                      >rabbisyraḥ lī ṣadrī wa yassir lī amrī waḥlul 'uqdatam mil
                      lisānī yafqahụ qaulī
                    </i>
                    <br />
                    Artinya: "Ya Rabb-ku, lapangkanlah dadaku, dan ringankanlah
                    segala urusanku, dan lepaskanlah kekakuan dari lidahku, agar
                    mereka mengerti perkataanku." (QS. Thaha: 25-28).
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-3">
                  <h5 class="card-title amiri-bold fs-3">
                    رَضِيْتُ بِاللهِ رَبًّا وَبِالإِسْلَامِ دِيْنًا
                    وَبِمُحَمَّدٍ نَبِيًّا وَرَسُوْلًا
                  </h5>
                  <p class="card-text">
                    <i>
                      Rodhitu billahi robba wabil islami dina wabi muhammadin
                      nabiyya warasula.
                    </i>
                    <br />
                    Artinya: Aku ridha Allah SWT sebagai Tuhanku, dan Islam
                    sebagai agamaku, dan Muhammad SAW sebagai Nabi dan Rasulku.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-4">
                  <h5 class="card-title amiri-bold fs-3">
                    رَبِّ زِدْنِيْ عِلْمًا وَارْزُقْنِيْ فَهْمًا
                  </h5>
                  <p class="card-text">
                    <i> Rabbii zidnii 'ilmaan warzuqnii fahmaan. </i>
                    <br />
                    Artinya: Ya Allah tambahkanlah kepadaku ilmu dan berikanlah
                    aku pemahaman yang baik.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-5">
                  <h5 class="card-title amiri-bold fs-3">
                    رَبِّ اغْفِرْ لِي وَلِوَالِدَيَّ وَارْحَمْهُمَا كَمَا
                    رَبَّيَانِي صَغِيرًا
                  </h5>
                  <p class="card-text">
                    <i
                      >Rabbighfirli waliwalidayya warhamhuma kamaa rabbayani
                      saghira</i
                    >
                    <br />
                    Artinya: Ya Allah ampunilah dosaku dan (dosa) kedua orang
                    tuaku. Sayangilah keduanya sebagaimana keduanya menyayangiku
                    di waktu kecil.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-6">
                  <h5 class="card-title amiri-bold fs-3">
                    اللَّهُمَّ انْفَعْنِي بِمَا عَلَّمْتَنِي ، وَعَلِّمْنِي مَا
                    يَنْفَعُنِي ، وَزِدْنِي عِلْمًا وَالْحَمْدُ لِلَّهِ عَلَى
                    كُلِّ حَالٍ
                  </h5>
                  <p class="card-text">
                    <i
                      >Allahummanfa'ni bima 'allamtani wa 'allimni ma yanfa'uni
                      wa zidni 'ilman walhamdulillahi 'ala kulli halin.</i
                    >
                    <br />
                    Artinya: Ya Allah, berilah kemanfaatan atas segala ilmu yang
                    Engkau ajarkan pada saya. Berilah saya ilmu yang bermanfaat
                    dan tambahkanlah ilmu pada saya. Segala puji bagi Allah
                    dalam setiap waktu.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-7">
                  <h5 class="card-title amiri-bold fs-3">
                    رَبَّنَاا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الْآخِرَةِ
                    حَسَنَةً وَقِنَا عَذَابَ النَّارِ
                  </h5>
                  <p class="card-text">
                    <i>
                      Rabbana aatina fiddunya hasanah wa fil-akhirati hasanah,
                      wa qinaa adzabannaari.
                    </i>
                    <br />

                    Artinya: Ya Tuhan kami, berikanlah kepada kami kebaikan di
                    dunia dan di akhirat, serta peliharalah kami dari siksa
                    neraka.
                  </p>
                </div>
              </div>
            </div>
          </div>
          <!-- Sesudah pelajaran -->
          <div class="col-12 col-lg-6 mb-4">
            <div class="card">
              <div class="card-header">
                <strong>Sesudah Pelajaran</strong>
              </div>
              <div class="card-body text-end">
                <div id="doa-1">
                  <h5 class="card-title amiri-bold fs-3">
                    اللَّهُمَّ أَرِنَا الْحَقَّ حَقًّا وَارْزُقْنَا اتِّبَاعَهُ،
                    وَأَرِنَا الْبَاطِلَ بَاطِلًا وَارْزُقْنَا اجْتِنَابَهُ،
                  </h5>
                  <p class="card-text">
                    <i
                      >Allohumma arinal haqqo haqqon warzuqnat tibaa'ahu, wa
                      arinal bathila bathilan warzuqnaj tinaabahu.
                    </i>
                    <br />
                    Artinya: "Ya Allah tunjukkanlah kepada kami yang benar itu
                    benar dan bantulah kami untuk mengikutinya, dan tunjukkanlah
                    kepada kami yang batil itu batil dan bantulah kami untuk
                    menjauhinya.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-2">
                  <h5 class="card-title amiri-bold fs-3">
                    وَالْعَصْرِۙ ۝١ اِنَّ الْاِنْسَانَ لَفِيْ خُسْرٍۙ ۝٢ اِلَّا
                    الَّذِيْنَ اٰمَنُوْا وَعَمِلُوا الصّٰلِحٰتِ وَتَوَاصَوْا
                    بِالْحَقِّ ەۙ وَتَوَاصَوْا بِالصَّبْرِࣖ ۝٣
                  </h5>
                  <p class="card-text">
                    <i
                      >wal-'ashr innal-insâna lafî khusr, illalladzîna âmanû wa
                      'amilush-shâliḫâti wa tawâshau bil-ḫaqqi wa tawâshau
                      bish-shabr
                    </i>
                    <br />
                    Artinya: "Demi masa. Sungguh, manusia berada dalam kerugian,
                    kecuali orang-orang yang beriman dan mengerjakan kebajikan
                    sert saling menasehati untuk kebenaran dan saling menasehati
                    untuk kesabaran" (QS. Al Ashr: 1-3).
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-3">
                  <h5 class="card-title amiri-bold fs-3">
                    اللَّهُمَّ ارْزُقْنَا فَهْمَ النَّبِيِّيْنَ وَحِفْظَ
                    اْلمَرْسَلِيْنَ وَإِلْهَامَ الْمَلَائِكَةِ الْمُقَرَّبِيْنَ،
                    بِرَحْمَتِكَ يَاأَرْحَمَ الرَّاحِمِيْنَ
                  </h5>
                  <p class="card-text">
                    <i>
                      Allahummarzuqna fahman nabiyyuna wa hifdhal mursalina wa
                      ilhamal malaikatil muqarrabin birahmatika ya arhamar
                      rahimina.
                    </i>
                    <br />
                    Artinya: Ya Allah, anugerahilah kami pemahaman para nabi,
                    hafalan para rasul, dan ilhamnya para malaikat yang dekat
                    (dengan-Mu), sebab kasih sayang-Mu, wahai zat yang Maha
                    Pengasih.
                  </p>
                </div>
                <br />
                <br />
                <div id="doa-4">
                  <h5 class="card-title amiri-bold fs-3">
                    رَبَّنَاا آتِنَا فِي الدُّنْيَا حَسَنَةً وَفِي الْآخِرَةِ
                    حَسَنَةً وَقِنَا عَذَابَ النَّارِ
                  </h5>
                  <p class="card-text">
                    <i>
                      Rabbana aatina fiddunya hasanah wa fil-akhirati hasanah,
                      wa qinaa adzabannaari.
                    </i>
                    <br />

                    Artinya: Ya Tuhan kami, berikanlah kepada kami kebaikan di
                    dunia dan di akhirat, serta peliharalah kami dari siksa
                    neraka.
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      <div class="container">
        <footer class="py-3 my-4">
          <p class="text-center text-body-secondary">
            © 2024 Hendra Manudinata
          </p>
        </footer>
      </div>

      <!-- jQuery -->
      <script
        src="https://code.jquery.com/jquery-3.7.1.min.js"
        integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
        crossorigin="anonymous"
      ></script>

      <!-- Print.js -->
      <link
        rel="stylesheet"
        href="https://printjs-4de6.kxcdn.com/print.min.css"
      />
      <script src="https://printjs-4de6.kxcdn.com/print.min.js"></script>

      <script>
        // Helpers
        function getMaxLengthInArrays(listOfArray) {
          let max_length = 0;
          listOfArray.forEach((element) => {
            if (element.length > max_length) {
              max_length = element.length;
            }
          });

          return max_length;
        }

        function matikanTombolJadikanUtama(button) {
          let btn = $(button);
          btn.html("<i class='bi bi-star-fill'></i> Kelas sudah utama!");
          btn.prop("disabled", true);

          return btn;
        }
      </script>
      <script>
        function fetchKelasInfo() {
          $.ajax({
            url: "kelas/info.json",
            type: "GET",
            dataType: "json",
            // Run in synchronous to avoid early loaded Javascript
            async: false,
            success: function (data, textStatus, jqXHR) {
              data.forEach((element) => {
                let optgroup = document.createElement("optgroup");
                optgroup.label = "Kelas " + element["jenjang"];

                element["kelas"].forEach((kelas) => {
                  let option = document.createElement("option");
                  option.value = kelas;
                  option.textContent = kelas;

                  optgroup.append(option);
                });

                $("#pilihKelas").append(optgroup);
              });

              $("#pilihKelas").prop("disabled", false);
            },
          });
        }

        function getJadwal(kelas) {
          if (!kelas) return;
          $.ajax({
            url: `kelas/${kelas}.json`,
            type: "GET",
            dataType: "json",
            success: function (dataPerHari, textStatus, jqXHR) {
              $("#tbodyTable").empty();
              $("#tbodyTableJumat").empty();

              let maxJamPelajaran = getMaxLengthInArrays(dataPerHari);

              // Hari biasa
              /// Hari biasa maksimal 10 pelajaran
              /// Jika aturan ini berubah, tolong kode di bawah disesuaikan
              let jamPelajaranBiasa = maxJamPelajaran - 1;
              for (let jamPelajaran of Array(jamPelajaranBiasa).keys()) {
                let trPerHari = document.createElement("tr");

                // Jam ke-
                let thJamPelajaran = document.createElement("th");
                thJamPelajaran.scope = "row";
                thJamPelajaran.innerText = jamPelajaran + 1;
                trPerHari.append(thJamPelajaran);

                let trimmedDataPerHari = dataPerHari.slice();
                trimmedDataPerHari.pop();
                trimmedDataPerHari.forEach((element, index) => {
                  let pelajaran = element[jamPelajaran];

                  let td = document.createElement("td");
                  if (pelajaran) {
                    td.innerText = pelajaran["keterangan"];
                    $(td).popover({
                      title: pelajaran["keterangan"],
                      content: pelajaran["nama"],
                      trigger: "hover focus",
                    });
                  } else {
                    td.innerText = "-";
                  }
                  trPerHari.append(td);
                });

                $("#tbodyTable").append(trPerHari);

                // Waktu istirahat
                let trIstirahat = document.createElement("tr");
                let tdIstirahat = document.createElement("td");
                let istirahatText = document.createElement("strong");
                istirahatText.textContent = "ISTIRAHAT";
                tdIstirahat.colSpan = 5;
                tdIstirahat.append(istirahatText);
                trIstirahat.append(tdIstirahat);
                if (jamPelajaran == 3 || jamPelajaran == 5) {
                  $("#tbodyTable").append(trIstirahat);
                }
              }

              // Hari Jumat
              for (let jamPelajaran of Array(maxJamPelajaran).keys()) {
                let trPerHari = document.createElement("tr");

                // Jam ke-
                let thJamPelajaran = document.createElement("th");
                thJamPelajaran.scope = "row";
                thJamPelajaran.innerText = jamPelajaran + 1;
                trPerHari.append(thJamPelajaran);

                let element = dataPerHari.slice(-1).pop();
                let pelajaran = element[jamPelajaran];

                let td = document.createElement("td");
                if (pelajaran) {
                  td.innerText = pelajaran["keterangan"];
                  $(td).popover({
                    title: pelajaran["keterangan"],
                    content: pelajaran["nama"],
                    trigger: "hover focus",
                  });
                } else {
                  td.innerText = "-";
                }
                trPerHari.append(td);

                $("#tbodyTableJumat").append(trPerHari);

                // Waktu istirahat
                let trIstirahat = document.createElement("tr");
                let tdIstirahat = document.createElement("td");
                let istirahatText = document.createElement("strong");
                istirahatText.textContent = "ISTIRAHAT";
                tdIstirahat.colSpan = 2;
                tdIstirahat.append(istirahatText);
                trIstirahat.append(tdIstirahat);
                if (jamPelajaran == 3 || jamPelajaran == 7) {
                  $("#tbodyTableJumat").append(trIstirahat);
                }
              }

              $("#kelasName").text("Kelas " + kelas);
              $("#jadwal").show();
            },
          });
        }
      </script>
      <script>
        $("#pilihKelas").on("change", function () {
          $("form").submit();
        });

        $(document).ready(() => {
          // Ambil daftar kelas
          fetchKelasInfo();

          // Support URL parameter
          const urlParams = new URLSearchParams(window.location.search);
          var kelas = urlParams.get("kelas");
          var kelasUtama = localStorage.getItem("kelasUtama");

          if (kelas) {
            $("#pilihKelas").val(kelas);

            // Ambil jadwal
            getJadwal(kelas);

            // Tombol jadikan utama
            if (kelasUtama == kelas) {
              matikanTombolJadikanUtama($("#jadikanUtama"));
            }
            $("#jadikanUtama").click(function () {
              localStorage.setItem("kelasUtama", kelas);

              matikanTombolJadikanUtama(this);
            });
          } else {
            // Tampilkan kelas utama jika tidak ada URL parameter
            if (kelasUtama) {
              getJadwal(kelasUtama);
              $("#pilihKelas").val(kelasUtama);

              matikanTombolJadikanUtama($("#jadikanUtama"));
            }
          }
        });
      </script>
      <script>
        const popoverTriggerList = document.querySelectorAll(
          '[data-bs-toggle="popover"]'
        );
        const popoverList = [...popoverTriggerList].map(
          (popoverTriggerEl) => new bootstrap.Popover(popoverTriggerEl)
        );
      </script>
      <script>
        function getStylesheetUrls() {
          const urls = [];
          for (const stylesheet of document.styleSheets) {
            if (stylesheet.href) {
              urls.push(stylesheet.href);
            }
          }
          return urls;
        }

        function print() {
          printJS({
            printable: "jadwalContent",
            type: "html",
            css: getStylesheetUrls(),
            scanStyles: false,
            targetStyles: ["*"],
          });
        }

        $("#printJadwal").click(() => print());
      </script>
    </footer>
  </body>
</html>
